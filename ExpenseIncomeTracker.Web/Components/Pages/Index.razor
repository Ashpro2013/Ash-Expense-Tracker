@page "/"
@attribute [AllowAnonymous]

<PageTitle>Redirecting</PageTitle>

@code {
    [Inject] private NavigationManager Navigation { get; set; } = default!;
    [Inject] private AuthenticationStateProvider AuthenticationStateProvider { get; set; } = default!;

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var isAuthenticated = authState.User.Identity?.IsAuthenticated ?? false;
        Navigation.NavigateTo(isAuthenticated ? "/dashboard" : "/login", true);
    }
}
